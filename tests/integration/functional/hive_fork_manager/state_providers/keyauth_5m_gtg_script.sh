#!/usr/bin/env bash

BUILD_DIR=.
BUILD_DIR=$(realpath $BUILD_DIR)
SRC_DIR=../haf
DATA_DIR=/home/hived/datadir

# Array of noncontiguous numbers

NUMBERS=(1 

2794856
2796791
2797050
2797188
2797362
2797645
2812987
2813087
2813732
2813782
2819817
2820033
2827089
2839669
2839884
2840585
2840590
2840591
2840592
2840599
2840637
2852954
2856501
2857043
2858870
2859120
2862537
2864673
2873202
2873934
2875453
2876936
2879567
2880136
2880139
2880161
2880192
2880193
2880223
2880255
2880258
2880267
2880332
2880350
2880420
2880646
2880672
2880705
2880706
2880760
2880772
2881300
2881334
2881386
2881393
2881462
2881474
2881657
2881669
2881920
2881985
2882049
2882072
2882084
2882104
2882847
2882872
2883482
2883577
2883838
2884007
2884019
2884483
2885318
2885370
2885375
2885409
2885463
2885659
2885887
2885937
2886356
2886896
2887489
2887502
2887536
2889996
2890483
2892079
2893140
2893633
2894724
2898100
2901222
2904214
2905038
2910519
2910577
2910863
2910892
2912870
2912956
2913680
2914454
2914883
2923723
2923910
2925000
2934342
2937442
2939142
2942161
2950041
2951947
2952982
2958401
2958981
2959714
2961051
2968480
2981910
2982861
2986466
2988124
2989603
2991816
2994663
2995752
2997036
2998656
3009758
3009957
3011694
3016136
3020052
3025887
3027614
3028691
3028700
3029630
3029666
3039201
3040482
3045918
3048874
3052206
3056907
3056968
3057124
3057137
3059524
3059617
3063696
3071156
3071180
3071194
3071243
3072023
3072051
3072227
3073997
3075654
3079906
3082156
3082893
3086157
3088349
3094967
3096678
3098247
3099275
3100318
3100789
3103497
3104291
3105480
3105636
3108373
3108605
3111202
3113016
3113496
3113582
3114328
3114439
3116913
3124883
3124998
3132052
3134487
3140317
3141796
3144657
3146065
3152343
3152534
3153076
3161611
3161680
3162790
3166551
3174548
3176704
3179313
3182677
3182941
3184633
3184819
3189345
3190548
3191323
3193021
3200386
3200741
3200931
3201365
3203049
3207784
3209112
3211055
3212290
3212952
3214055
3231629
3234145
3244580
3336174
3386179
3399063
3399201
3399202
3399203
3513147
3560270
3573464
3593223
3594473
3609340
3611272
3619122
3619168
3623467
3624209
3625791
3632116
3638719
3639528
3646386
3646900
3647042
3647231
3647439
3649196
3654052
3654737
3655891
3656946
3664606
3669009
3669303
3670886
3681975
3682342
3701313
3703621
3703690
3703953
3704651
3704657
3704670
3704688
3709019
3710966
3712766
3717177
3718472
3719520
3723858
3723903
3759466
3759799
3759820
3760135
3760145
3760160
3760183
3770483
3777398
3781402
3783966
3784027
3784059
3787998
3788329
3797230
3799878
3808126
3809194
3813997
3816947
3817065
3818561
3818587
3818953
3818983
3820220
3820231
3820249
3820266
3820364
3820414
3820472
3820474
3820512
3820565
3820569
3820592
3820615
3820708
3820711
3820815
3820879
3820935
3820966
3821111
3821150
3821225
3821347
3821410
3821908
3822129
3822331
3822443
3822445
3822506
3822678
3822723
3823276
3823310
3823478
3823954
3824218
3824225
3824290
3824407
3824679
3824792
3824820
3824985
3825115
3825171
3825243
3825512
3825585
3826016
3826308
3826530
3826926
3827074
3827447
3827465
3827939
3828163
3828507
3828524
3828586
3829380
3829666
3830126
3830127
3830458
3830733
3830746
3830759
3830760
3830761
3830762
3830763
3830764
3830765
3830766
3830767
3831675
3831849
3833075
3833221
3833232
3833335
3833795
3834566
3834759
3834859
3835589
3836472
3836776
3836815
3836914
3837637
3837936
3839501
3840984
3841100
3842543
3844033
3844135
3844155
3844195
3844971
3845622
3845686
3845704
3846204
3847175
3848746
3849684
3849814
3850348
3850577
3851113
3851553
3851745
3852198
3852240
3852858
3853404
3853759
3854924
3854939
3856445
3857664
3857966
3859545
3861073
3862550
3864200
3865600
3866830
3867202
3868790
3870248
3871788
3873292
3874815
3876306
3877850
3878021
3879352
3879387
3880843
3881834
3882252
3882371
3882800
3883243
3883961
3885447
3886533
3887001
3888499
3890028
3891545
3892188
3893048
3893448
3894596
3895285
3896068
3896255
3897675
3898184
3898390
3899166
3900701
3901175
3902222
3902230
3902274
3902400
3902637
3903784
3905241
3906767
3908296
3909046
3909820
3911290
3912817
3914353
3915908
3917465
3918973
3920495
3922024
3923218
3923321
3923561
3924274
3924580
3925164
3925915
3926641
3928126
3928940
3929639
3931238
3932736
3933091
3934289
3935881
3936093
3937158
3937354
3938902
3939464
3940377
3940856
3940858
3941301
3941303
3941432
3942048
3942623
3943176
3943905
3944502
3945037
3945701
3946229
3946888
3946908
3947498
3948085
3948100
3948664
3949289
3949883
3950469
3951059
3951654
3952159
3952208
3952862
3953420
3954126
3954664
3955064
3955264
3955603
3955916
3956341
3956515
3956998
3957088
3957648
3958350
3958936
3959528
3960108
3960674
3961374
3961951
3962541
3963163
3963760
3964378
3964947
3965285
3965496
3965742
3966167
3966777
3967390
3968042
3968590
3968605
3969184
3969831
3970467
3971076
3971661
3972184
3972802
3972812
3973481
3974045
3974656
3975220
3975836
3976437
3977020
3977623
3978253
3978859
3979521
3980037
3980637
3981231
3981876
3982472
3983107
3983629
3984312
3984692
3984862
3985180
3985184
3985208
3985534
3986167
3986354
3986644
3986704
3987309
3987914
3988505
3989129
3989686
3989700
3990315
3990353
3990965
3991678
3992278
3992861
3993474
3993894
3994030
3994521
3994822
3994825
3994979
3995389
3995627
3995847
3996326
3996822
3997230
3997563
3997721
3998170
3998525
3998630
3999097
3999521
3999986
4000413
4000802
4001273
4001738
4002180
4002565
4003087
4003521
4003982
4004454
4004865
4005346
4005786
4006248
4006682
4007065
4007605
4007999
4008489
4008973
4009379
4009418
4009839
4010307
4010689
4011143
4011166
4011581
4012083
4012164
4012511
4012986
4013420
4013843
4014371
4014756
4015237
4015691
4016062
4016556
4016922
4017529
4017938
4018385
4018570
4018816
4019232
4019698
4020137
4020648
4020997
4021542
4021956
4022443
4022851
4022866
4023299
4023613
4023667
4024103
4024199
4024253
4024697
4025122
4025464
4025573
4025966
4026483
4026875
4027361
4027792
4028249
4028721
4029082
4029595
4030013
4030541
4030999
4031390
4031877
4032284
4032309
4032729
4033220
4033683
4034065
4034505
4034990
4035410
4035905
4036346
4036468
4036779
4037291
4037718
4038164
4038515
4039012
4039534
4039982
4040381
4040847
4041387
4041765
4042224
4042661
4043122
4043617
4043985
4044572
4044600
4044622
4044781
4044797
4045050
4045459
4045978
4046388
4046846
4047286
4047745
4048228
4048664
4049079
4049488
4049965
4050426
4050842
4051364
4051854
4051878
4051968
4052077
4052307
4052506
4052631
4052662
4052696
4053137
4053619
4054045
4054469
4054825
4054936
4054961
4055389
4055795
4056299
4056327
4056660
4056805
4057204
4057591
4057995
4058105
4058586
4059007
4059450
4059929
4060401
4060818
4061269
4061679
4062105
4062674
4063046
4063552
4063943
4064471
4064891
4065338
4065564
4065801
4065971
4066213
4066550
4066658
4067136
4067561
4067938
4068398
4068823
4069306
4069732
4070162
4070258
4070671
4070857
4071039
4071062
4071588
4072056
4072465
4072859
4073362
4073870
4074258
4074710
4075096
4075620
4076085
4076452
4076598
4076963
4077410
4077901
4078313
4078804
4079139
4079623
4080024
4080171
4080380
4080529
4080963
4081398
4081817
4082311
4082655
4082843
4083237
4083721
4083782
4084192
4084305
4084335
4084447
4084561
4084991
4085507
4085976
4086348
4086792
4086916
4087295
4087786
4088204
4088596
4089094
4089527
4089977
4090376
4090843
4091319
4091818
4092205
4092620
4093063
4093435
4093565
4093999
4094515
4094950
4095067
4095357
4095813
4096328
4096764
4097143
4097593
4098119
4098452
4098507
4098950
4099400
4099405
4099411
4099473
4099875
4100277
4100729
4101255
4101698
4101708
4102063
4102524
4102992
4103414
4103431
4103436
4103517
4103581
4103627
4103921
4104403
4104564
4104791
4105260
4105282
4105456
4105474
4105707
4106188
4106652
4106670
4107101
4107536
4107900
4108407
4108803
4109175
4109651
4110101
4110599
4110953
4111334
4111857
4112160
4112203
4112346
4112395
4112805
4113165
4113626
4113798
4113944
4114446
4114456
4114640
4114850
4115318
4115730
4116169
4116568
4117148
4117505
4117674
4117977
4118377
4118857
4119227
4119738
4120065
4120563
4120946
4121420
4121814
4122227
4122728
4123157
4123587
4123983
4124374
4124898
4125262
4125535
4125741
4126168
4126513
4126932
4127341
4127778
4128249
4128664
4129148
4129604
4129992
4130407
4130830
4131335
4131743
4132197
4132532
4132958
4133415
4133809
4133829
4133994
4134244
4134677
4135081
4135488
4135930
4136415
4136796
4137242
4137643
4138149
4138510
4138768
4138783
4138794
4138799
4138900
4138938
4138939
4138940
4138983
4138984
4139004
4139056
4139082
4139153
4139353
4139371
4139397
4139399
4139403
4139406
4139408
4139410
4139411
4139412
4139413
4139414
4139415
4139427
4139432
4139468
4139481
4139518
4139565
4139580
4139598
4139610
4139660
4139669
4139682
4139699
4139819
4139841
4139862
4139890
4139903
4139936
4139963
4139966
4139967
4139974
4139977
4139978
4139982
4139985
4139991
4139994
4139998
4140002
4140004
4140032
4140054
4140090
4140115
4140126
4140195
4140246
4140249
4140273
4140289
4140321
4140351
4140352
4140360
4140361
4140363
4140519
4140549
4140550
4140658
4140698
4140728
4140963
4141109
4141110
4141277
4141287
4141311
4141314
4141318
4141366
4141546
4141552
4141553
4141646
4141693
4141699
4141791
4141880
4142205
4142361
4142368
4142377
4142381
4142478
4142702
4142768
4142781
4142801
4143188
4143300
4143317
4143365
4143478
4143617
4143788
4144013
4144051
4144329
4144434
4144440
4144446
4144494
4144509
4144551
4144714
4144941
4144999
4145091
4145110
4145327
4145351
4145444
4145578
4145778
4145873
4146137
4146194
4146354
4146582
4146589
4146701
4146751
4146755
4146756
4146760
4146763
4146766
4146768
4146771
4146772
4146773
4146787
4146803
4146807
4146815
4146823
4146825
4146827
4147001
4147420
4147800
4147812
4147830
4148200
4148204
4148305
4148364
4148759
4149155
4149249
4149346
4149548
4150049
4150275
4150423
4150516
4150863
4151024
4151297
4151372
4151447
4151622
4151635
4151682
4152153
4152489
4152564
4152827
4152909
4152960
4153237
4153454
4153725
4153810
4153813
4153979
4154120
4154123
4154153
4154257
4154337
4154642
4154674
4154785
4155075
4155504
4155934
4156297
4156403
4156480
4156848
4157228
4157235
4157679
4157784
4158101
4158129
4158558
4158646
4158973
4159081
4159209
4159380
4159412
4159819
4160003
4160128
4160130
4160284
4160350
4160559
4160641
4160659
4160974
4161137
4161491
4161740
4162018
4162471
4162693
4163023
4163466
4163891
4163964
4164153
4164369
4164766
4164953
4165157
4165627
4165851
4166025
4166519
4166896
4167300
4167393
4167795
4167884
4168191
4168645
4168892
4169121
4169347
4169514
4169817
4169848
4169940
4170401
4170838
4171022
4171316
4171693
4172184
4172593
4173019
4173454
4173959
4174329
4174710
4175225
4175702
4176153
4176538
4176921
4177351
4177769
4178223
4178569
4178608
4179060
4179447
4179917
4180286
4180786
4181215
4181494
4181664
4182053
4182456
4182883
4183392
4183742
4184172
4184691
4185110
4185512
4186019
4186429
4186886
4187331
4187732
4188156
4188607
4189021
4189402
4189877
4190304
4190609
4190749
4191167
4191562
4191904
4192358
4192871
4193218
4193690
4194107
4194505
4194937
4195454
4195851
4196252
4196717
4197057
4197569
4197951
4197993
4198441
4198517
4198831
4199042
4199204
4199634
4200110
4200596
4200961
4201376
4201793
4202308
4202668
4203122
4203615
4203951
4204375
4204858
4205253
4205428
4205725
4206147
4206506
4206928
4207468
4207864
4208278
4208770
4209130
4209588
4210029
4210414
4210850
4211285
4211710
4212127
4212311
4212366
4212610
4213053
4213420
4213927
4214309
4214320
4214702
4215226
4215608
4216041
4216056
4216453
4216783
4216888
4216996
4217296
4217441
4217450
4217752
4218162
4218541
4218935
4219015
4219451
4219840
4220298
4220765
4221127
4221147
4221660
4222090
4222496
4222962
4223354
4223749
4224219
4224642
4225084
4225514
4225954
4226383
4226847
4227261
4227695
4228129
4228576
4228988
4229462
4229840
4230225
4230742
4231177
4231647
4232026
4232435
4232913
4233320
4233828
4234264
4234660
4234895
4235031
4235621
4236009
4236462
4236884
4237278
4237724
4238218
4238597
4239032
4239501
4239961
4240419
4240804
4241244
4241696
4242163
4242562
4242973
4243454
4243810
4244341
4244709
4245175
4245577
4245603
4246028
4246481
4246861
4247375
4247784
4248224
4248708
4249181
4249547
4250017
4250452
4250867
4251326
4251747
4252084
4252552
4252974
4253362
4253910
4254351
4254685
4255169
4255398
4255630
4255750
4256089
4256473
4256891
4257135
4257344
4257785
4258193
4258619
4258626
4258634
4259074
4259587
4259998
4260412
4260832
4261271
4261676
4262117
4262611
4263024
4263431
4263844
4264318
4264709
4265184
4265584
4265754
4265760
4265765
4265778
4265780
4265784
4266107
4266499
4266899
4267374
4267790
4268233
4268677
4269156
4269553
4269591
4270043
4270487
4270887
4271180
4271368
4271861
4272235
4272669
4273179
4273538
4273984
4274390
4274864
4274934
4274940
4275025
4275028
4275034
4275056
4275072
4275074
4275075
4275088
4275095
4275154
4275211
4275236
4275308
4275313
4275321
4275337
4275359
4275360
4275385
4275386
4275389
4275399
4275400
4275405
4275544
4275586
4275596
4275627
4275764
4275786
4275949
4276225
4276309
4276361
4276600
4276737
4277067
4277323
4277349
4277483
4277499
4277937
4278106
4278401
4278774
4278832
4278833
4278835
4278837
4278864
4278874
4279179
4279382
4279455
4279636
4280101
4280467
4280496
4280497
4280515
4280701
4280849
4280858
4280916
4281121
4281331
4281401
4281403
4281406
4281803
4282219
4282612
4282616
4282621
4282703
4283151
4283157
4283165
4283568
4284065
4284338
4284488
4284536
4284594
4284860
4285079
4285289
4285685
4285745
4286180
4286585
4286979
4287454
4287905
4288354
4288798
4289261
4289661
4289935
4290094
4290499
4291013
4291461
4291863
4292295
4292466
4292653
4293105
4293553
4293988
4294400
4294904
4295279
4295294
4295747
4296200
4296694
4297133
4297599
4297976
4298387
4298863
4299247
4299258
4299717
4300175
4300553
4301018
4301452
4301468
4301931
4302272
4302780
4303338
4303689
4304018
4304041
4304538
4304869
4305378
4305838
4306243
4306695
4307072
4307553
4308015
4308480
4308919
4309425
4309748
4310166
4310503
4310577
4310638
4311093
4311544
4311690
4312061
4312495
4312692
4312877
4313304
4313819
4314209
4314712
4315091
4315562
4315946
4315977
4316399
4316843
4317249
4317683
4318146
4318597
4319008
4319423
4319797
4320339
4320803
4321258
4321671
4322091
4322529
4322954
4323355
4323804
4324262
4324380
4324731
4325118
4325567
4326041
4326391
4326535
4327007
4327391
4327857
4328205
4328674
4329097
4329566
4329933
4330029
4330505
4330870
4331306
4331766
4332209
4332638
4333111
4333542
4333902
4334449
4335027
4335435
4335920
4336211
4336268
4336271
4336666
4337097
4337182
4337596
4337613
4338046
4338503
4338523
4338918
4339256
4339778
4340258
4340703
4341113
4341491
4341907
4342413
4342806
4343168
4343253
4343603
4343775
4344104
4344591
4344986
4345497
4346006
4346474
4346818
4347315
4347695
4348094
4348165
4348561
4349008
4349466
4349953
4350375
4350765
4351212
4351675
4352158
4352491
4352603
4352679
4352968
4353393
4353874
4354272
4354749
4355173
4355556
4356011
4356469
4356948
4357347
4357885
4358307
4358689
4359196
4359554
4359998
4360316
4360461
4360881
4361326
4361743
4362216
4362618
4363045
4363497
4363927
4364410
4364664
4364847
4365235
4365731
4366196
4366522
4366926
4367428
4367523
4367824
4368311
4368779
4369158
4369657
4370064
4370531
4370953
4371405
4371670
4371862
4372314
4372801
4373135
4373648
4373793
4374041
4374542
4374933
4375366
4375571
4375730
4375831
4376178
4376691
4377107
4377188
4377546
4377986
4378441
4378913
4379343
4379772
4380136
4380148
4380295
4380632
4380671
4381171
4381610
4381986
4382358
4382370
4382862
4383323
4383795
4384135
4384549
4384569
4385063
4385505
4385888
4386400
4386830
4387242
4387690
4388131
4388527
4389025
4389436
4389889
4390018
4390094
4390361
4390716
4391059
4391215
4391476
4391481
4391599
4391611
4391734
4391780
4391803
4392031
4392548
4393033
4393038
4393385
4393846
4394266
4394381
4394818
4395099
4395251
4395468
4395652
4396045
4396178
4396494
4396547
4396564
4396958
4397493
4397906
4398362
4398481
4398761
4398833
4399213
4399650
4399688
4399842
4400041
4400188
4400505
4400711
4400928
4401354
4401789
4402313
4402688
4403117
4403160
4403607
4404047
4404094
4404242
4404455
4404929
4405343
4405747
4405990
4406246
4406311
4406686
4407145
4407545
4407899
4408405
4408925
4409087
4409112
4409286
4409694
4409806
4410265
4410528
4410676
4411168
4411613
4412031
4412284
4412285
4412471
4412908
4412957
4412960
4413342
4413347
4413381
4413527
4413529
4413593
4413595
4413683
4413684
4413776
4414069
4414070
4414218
4414225
4414226
4414335
4414337
4414393
4414430
4414431
4414651
4415070
4415531
4415952
4416314
4416462
4416512
4416868
4417307
4417735
4418151
4418619
4418746
4419104
4419623
4420047
4420397
4420825
4421259
4421726
4422224
4422629
4423021
4423091
4423138
4423488
4423892
4424440
4424541
4424844
4425200
4425252
4425306
4425684
4425863
4426126
4426622
4426779
4427089
4427475
4427575
4427596
4427901
4427983
4428382
4428701
4428786
4429245
4429636
4429656
4430117
4430546
4431047
4431524
4431639
4431894
4432422
4432828
4433142
4433274
4433821
4434236
4434684
4434768
4435164
4435574
4436108
4436193
4436483
4436997
4437369
4437849
4437902
4438342
4438643
4438779
4439230
4439269
4439666
4440136
4440700
4440778
4440825
4441074
4441501
4441527
4442054
4442083
4442272
4442330
4442476
4443014
4443367
4443414
4443883
4444435
4444538
4444540
4444547
4444879
4445252
4445388
4445435
4445650
4445745
4446263
4446629
4447153
4447599
4447610
4448031
4448095
4448522
4448699
4449002
4449005
4449030
4449455
4449780
4449962
4450045
4450368
4450394
4450865
4451257
4451551
4451726
4452145
4452655
4453091
4453400
4453615
4454055
4454189
4454272
4454527
4454556
4454560
4454562
4454673
4455018
4455524
4456028
4456395
4456555
4456753
4457375
4457795
4458227
4458710
4459120
4459617
4460009
4460596
4460989
4461113
4461430
4461795
4462016
4462379
4462814
4462825
4463260
4463793
4464209
4464687
4465094
4465582
4466157
4466513
4466988
4467486
4467850
4467908
4468320
4468805
4468850
4469285
4469683
4470255
4470648
4470859
4471093
4471598
4471704
4471887
4472067
4472456
4472924
4473417
4473842
4473852
4473914
4474310
4474731
4475201
4475742
4476130
4476561
4477143
4477554
4477616
4478000
4478574
4478971
4479403
4479852
4479899
4480339
4480343
4480872
4481241
4481683
4482073
4482328
4482535
4482625
4482704
4483023
4483290
4483517
4483976
4484389
4484814
4485364
4485749
4486229
4486272
4486735
4487149
4487700
4488085
4488609
4488995
4489514
4489762
4489913
4490400
4490800
4491288
4491756
4492232
4492678
4493099
4493600
4494069
4494345
4494549
4495031
4495463
4495899
4496406
4496823
4497082
4497362
4497800
4498360
4498765
4499243
4499637
4500136
4500670
4501109
4501489
4502025
4502393
4502914
4503378
4503836
4504291
4504658
4505173
4505444
4505609
4506036
4506521
4506953
4507445
4508004
4508452
4508984
4509411
4509836
4510312
4510828
4511091
4511302
4511654
4511656
4511778
4512284
4512737
4513144
4513674
4513923
4514059
4514151
4514153
4514373
4514376
4514478
4514837
4514966
4515411
4515775
4515853
4516074
4516089
4516350
4516787
4517196
4517698
4518072
4518560
4519053
4519469
4519916
4520384
4520838
4521228
4521747
4522208
4522636
4523026
4523522
4523921
4524421
4524892
4524912
4525351
4525699
4526152
4526718
4527182
4527641
4528062
4528574
4529028
4529405
4529964
4530349
4530773
4531183
4531473
4531711
4532154
4532700
4533121
4533553
4533976
4534428
4534932
4535377
4535808
4536233
4536259
4536577
4536579
4536657
4536696
4536767
4537154
4537226
4537658
4537675
4537697
4538115
4538549
4538947
4539076
4539313
4539442
4539505
4539701
4539898
4540216
4540224
4540376
4540766
4540826
4540829
4540941
4541265
4541750
4542219
4542545
4543056
4543573
4544070
4544177
4544473
4545005
4545402
4545862
4546363
4546856
4547291
4547757
4548200
4548656
4548679
4549134
4549165
4549646
4550035
4550464
4550928
4551401
4551901
4552344
4552756
4553169
4553307
4553684
4554154
4554627
4555074
4555490
4556004
4556437
4556943
4557349
4557769
4558193
4558691
4559125
4559643
4560060
4560628
4561034
4561419
4561924
4562321
4562850
4563301
4563758
4564116
4564183
4564589
4565035
4565602
4566053
4566280
4566306
4566452
4566788
4566887
4567007
4567506
4567920
4568414
4568774
4568827
4569175
4569334
4569687
4569723
4569740
4569753
4570221
4570712
4570906
4571017
4571043
4571164
4571675
4572161
4572595
4573059
4573427
4573942
4574412
4574871
4574967
4575350
4575794
4576202
4576715
4577240
4577702
4578160
4578552
4579057
4579477
4579991
4580448
4580934
4581399
4581670
4581809
4582278
4582703
4583144
4583323
4583443
4583684
4584177
4584639
4585094
4585525
4586004
4586460
4586675
4586906
4587420
4587906
4588395
4588738
4589169
4589259
4589706
4590190
4590604
4591110
4591597
4591829
4592063
4592454
4592973
4593426
4593889
4594373
4594748
4595230
4595719
4596078
4596182
4596709
4597093
4597510
4597889
4598026
4598452
4598517
4598998
4599470
4599956
4600324
4600480
4600510
4600946
4601410
4601832
4602307
4602704
4603259
4603744
4604131
4604559
4604698
4605051
4605507
4605986
4606521
4606994
4607412
4607885
4608413
4608792
4609316
4609378
4609687
4610168
4610654
4611093
4611548
4611556
4611982
4612540
4612955
4613384
4613915
4614319
4614825
4615222
4615665
4616189
4616636
4617118
4617205
4617551
4618044
4618489
4619019
4619456
4619557
4619839
4620291
4620363
4620865
4620951
4621218
4621750
4621947
4622190
4622436
4622677
4623080
4623589
4624056
4624504
4624927
4625480
4625854
4626365
4626715
4627231
4627671
4628247
4628729
4629208
4629601
4630016
4630595
4630995
4631434
4631921
4632427
4632825
4633373
4633817
4634313
4634701
4635049
4635225
4635679
4636071
4636151
4636165
4636491
4636740
4636957
4637448
4637873
4638334
4638863
4639021
4639360
4639684
4640190
4640680
4641130
4641614
4641976
4642478
4642933
4643341
4643381
4643775
4643874
4644288
4644545
4644799
4645285
4645795
4646190
4646597
4647054
4647558
4647982
4648119
4648483
4648897
4649335
4649788
4650255
4650766
4650928
4651264
4651733
4652237
4652676
4653085
4653515
4653995
4654183
4654201
4654483
4654866
4654968
4655375
4655430
4655449
4655753
4655791
4656276
4656727
4657195
4657655
4657778
4658163
4658594
4659007
4659541
4659992
4660434
4660853
4661308
4661757
4662214
4662653
4663110
4663595
4664044
4664502
4664973
4665433
4665850
4666313
4666757
4666846
4667270
4667706
4668224
4668674
4669149
4669522
4670006
4670072
4670560
4671009
4671437
4671866
4672227
4672229
4672351
4672813
4673248
4673789
4674194
4674288
4674616
4674751
4675046
4675509
4675941
4676389
4676919
4677425
4677844
4678293
4678814
4679346
4679726
4680236
4680710
4681200
4681327
4681658
4681739
4682149
4682624
4683048
4683611
4683902
4684040
4684150
4684635
4684975
4685258
4685271
4685458
4686035
4686548
4686967
4687468
4687886
4688075
4688504
4688986
4689472
4690031
4690512
4690733
4690947
4691393
4691446
4691937
4692390
4692835
4693355
4693823
4694346
4694816
4695273
4695777
4695861
4696180
4696744
4697290
4697707
4698223
4698659
4699163
4699625
4700064
4700589
4701055
4701599
4702072
4702547
4702981
4703514
4703800
4704007
4704476
4705010
4705432
4705973
4706475
4706949
4707401
4707898
4708321
4708850
4709337
4709838
4710343
4710806
4711324
4711839
4712310
4712736
4713187
4713780
4714178
4714595
4715177
4715674
4715963
4716075
4716361
4716618
4717087
4717623
4718102
4718620
4719083
4719615
4720006
4720326
4720527
4721000
4721434
4721892
4722435
4722815
4722908
4723363
4723913
4724442
4724967
4725349
4725925
4726397
4726819
4727359
4727834
4728287
4728761
4729311
4729866
4730230
4730702
4731274
4731782
4732209
4732755
4733216
4733702
4734120
4734671
4735187
4735630
4736168
4736679
4737138
4737572
4738066
4738578
4739043
4739523
4739977
4740467
4740971
4741411
4742047
4742526
4743102
4743578
4744009
4744518
4745048
4745519
4745981
4746450
4746985
4747431
4747968
4748447
4748939
4749513
4749971
4750445
4750945
4751404
4751883
4752467
4752930
4753330
4753887
4754313
4754731
4755320
4755863
4756289
4756793
4756798
4757100
4757356
4757739
4758285
4758290
4758716
4759310
4759710
4760181
4760728
4761247
4761386
4761603
4761608
4761720
4762185
4762741
4763281
4763680
4764215
4764699
4765141
4765655
4766144
4766657
4767104
4767637
4768141
4768684
4769057
4769122
4769228
4769390
4769408
4769473
4769539
4769544
4769565
4769666
4769669
4770016
4770169
4770583
4771051
4771618
4772073
4772496
4773048
4773513
4773989
4774487
4774965
4775521
4775660
4775904
4776466
4776976
4777539
4777949
4778481
4778486
4778996
4779402
4779884
4780388
4780933
4781434
4781949
4782432
4782892
4783300
4783963
4784410
4784510
4785008
4785428
4785842
4786388
4786452
4786863
4787366
4787712
4787831
4787845
4788346
4788797
4789283
4789832
4790211
4790736
4791291
4791732
4792204
4792544
4792727
4792762
4793155
4793737
4794269
4794730
4794793
4795231
4795316
4795715
4796237
4796651
4796700
4796863
4796866
4796869
4797221
4797697
4797767
4798200
4798217
4798340
4798723
4799167
4799730
4800215
4800728
4801297
4801741
4802315
4802748
4803269
4803697
4804152
4804757
4805229
4805761
4806145
4806164
4806728
4806921
4807273
4807775
4808267
4808788
4809288
4809826
4810308
4810827
4811310
4811689
4812383
4812814
4813273
4813813
4814396
4814841
4815306
4815803
4815874
4816409
4816886
4817161
4817300
4817935
4818388
4818863
4819401
4819534
4819923
4820423
4820919
4821483
4821825
4821946
4822434
4822976
4823507
4823959
4824446
4824899
4825192
4825421
4825889
4826429
4826943
4827541
4827958
4828508
4828841
4828982
4829438
4829592
4829975
4830064
4830440
4831003
4831492
4831980
4832499
4832978
4833383
4833986
4834539
4835086
4835483
4835532
4836056
4836498
4837052
4837584
4838095
4838586
4839136
4839637
4840088
4840579
4841098
4841639
4842095
4842680
4843219
4843652
4844172
4844713
4845184
4845628
4846198
4846705
4847175
4847376
4847665
4848199
4848778
4849266
4849772
4850306
4850891
4851301
4851818
4852276
4852797
4853249
4853777
4854323
4854755
4854936
4855126
4855306
4855657
4855806
4856038
4856385
4856819
4857383
4857917
4858374
4858864
4859370
4859902
4860375
4860870
4861443
4861905
4862329
4862948
4863427
4863963
4864424
4864947
4865456
4865994
4866473
4866939
4867421
4868030
4868459
4868991
4869444
4869974
4870485
4870965
4871402
4871991
4872494
4872954
4873451
4873918
4874354
4874914
4875548
4876057
4876583
4877122
4877704
4878223
4878718
4879243
4879742
4880168
4880740
4881247
4881800
4882184
4882758
4882971
4883271
4883767
4884311
4884728
4884886
4885324
4885474
4885807
4886294
4886887
4887366
4887844
4888386
4888872
4889396
4889886
4890340
4890891
4891421
4891960
4892505
4892916
4893470
4893979
4894506
4894975
4895520
4896027
4896497
4897040
4897485
4898025
4898618
4899099
4899321
4899702
4900163
4900739
4901205
4901795
4902264
4902848
4903383
4903841
4904345
4904872
4905406
4905938
4906551
4906980
4907564
4907831
4907923
4908034
4908628
4909124
4909347
4909615
4910105
4910718
4911243
4911776
4912256
4912804
4913306
4913853
4914408
4914720
4914976
4915148
4915478
4915971
4916479
4916962
4917554
4918072
4918607
4919127
4919652
4920154
4920796
4921227
4921727
4922327
4922818
4923356
4923865
4924368
4924859
4925357
4925949
4926404
4926884
4926921
4927430
4928007
4928534
4929065
4929118
4929282
4929581
4930099
4930647
4931176
4931681
4932084
4932701
4933206
4933296
4933733
4934232
4934477
4934728
4935273
4935838
4936307
4936921
4937419
4937947
4938389
4938655
4938658
4938666
4938863
4938991
4939446
4939979
4940232
4940548
4940918
4940972
4941527
4942049
4942687
4943151
4943669
4944117
4944695
4945169
4945733
4946258
4946686
4946829
4947263
4947771
4948330
4948797
4949360
4949897
4950283
4950438
4950973
4951427
4952001
4952469
4952942
4953427
4953689
4953979
4954503
4955013
4955544
4956065
4956130
4956426
4956609
4957080
4957613
4958220
4958740
4959248
4959746
4960256
4960760
4960868
4960890
4961307
4961723
4962298
4962727
4963235
4963787
4964335
4964781
4965334
4965925
4966385
4966918
4967194
4967451
4967923
4967940
4968392
4968995
4969471
4969475
4970015
4970252
4970481
4970994
4971569
4971777
4971979
4972052
4972478
4972497
4972501
4972517
4973073
4973539
4974107
4974677
4975112
4975625
4976187
4976681
4977216
4977786
4978228
4978712
4979287
4979808
4980312
4980839
4981353
4981926
4982316
4982841
4982908
4983388
4983942
4983975
4984371
4984816
4984966
4985120
4985121
4985205
4985207
4985481
4985918
4985953
4986425
4986973
4987502
4987785
4987903
4987973
4988523
4989089
4989583
4990080
4990579
4991112
4991617
4992059
4992087
4992129
4992167
4992391
4992427
4992488
4992521
4992628
4993223
4993425
4993519
4993625
4993644
4993695
4994255
4994484
4994709
4995198
4995216
4995706
4996177
4996748
4997264
4997768
4997854
4998334
4998797
4998801
4998951
4999013
4999167
4999237
4999330
4999861
4999982

5000000)
# NUMBERS=(1 2794855 2794856 5000000)

fetch_and_save_gtg_account() {
    local last_block=$1
    local result_file="/tmp/a_gtg_changes.txt"
    local account_file="/tmp/gtg_$last_block.json"

    # Fetch 'gtg' account data
    response=$(curl -s --data '{"jsonrpc":"2.0", "method":"condenser_api.get_accounts", "params":[["gtg"]], "id":1}' localhost:8090)
    account_data=$(echo "$response" | jq -r '.result[0]')

    # Save the account data to a file named "gtg_block_number"
    echo "$account_data" > "$account_file"

    # Check for changes in the account data and log to result_file
    if [ "$previous_account_data" != "$account_data" ]; then
        if [ -n "$previous_account_data" ]; then
            echo "Change detected at block $last_block" >> "$result_file"
            echo "Account data saved in $account_file" >> "$result_file"
        fi
        previous_account_data="$account_data"
    fi
}

previous_data=""

# Function to fetch and monitor changes in the 'gtg' account
monitor changes in the 'gtg' account
fetch_and_monitor_gtg() {
    local last_block=$1
    local result_file="/tmp/gtg_changes.txt"

    # Fetch 'gtg' account data
    response=$(curl -s --data '{"jsonrpc":"2.0", "method":"condenser_api.get_accounts", "params":[["gtg"]], "id":1}' localhost:8090)
    current_owner_account_auths=$(echo "$response" | jq -r '.result[0].owner.account_auths')
    current_active_account_auths=$(echo "$response" | jq -r '.result[0].active.account_auths')
    current_posting_account_auths=$(echo "$response" | jq -r '.result[0].posting.account_auths')
    current_owner_key_auths=$(echo "$response" | jq -r '.result[0].owner.key_auths')
    current_active_key_auths=$(echo "$response" | jq -r '.result[0].active.key_auths')
    current_posting_key_auths=$(echo "$response" | jq -r '.result[0].posting.key_auths')
    current_memo_key=$(echo "$response" | jq -r '.result[0].memo_key')

    # Check for changes in each field
    if [ "$current_owner_account_auths" != "$previous_owner_account_auths" ] || [ "$current_active_account_auths" != "$previous_active_account_auths" ] || [ "$current_posting_account_auths" != "$previous_posting_account_auths" ] || [ "$current_owner_key_auths" != "$previous_owner_key_auths" ] || [ "$current_active_key_auths" != "$previous_active_key_auths" ] || [ "$current_posting_key_auths" != "$previous_posting_key_auths" ] || [ "$current_memo_key" != "$previous_memo_key" ]; then
        echo "Change detected at block $last_block" >> "$result_file"
        echo "owner.account_auths: $current_owner_account_auths" >> "$result_file"
        echo "active.account_auths: $current_active_account_auths" >> "$result_file"
        echo "posting.account_auths: $current_posting_account_auths" >> "$result_file"
        echo "owner.key_auths: $current_owner_key_auths" >> "$result_file"
        echo "active.key_auths: $current_active_key_auths" >> "$result_file"
        echo "posting.key_auths: $current_posting_key_auths" >> "$result_file"
        echo "memo_key: $current_memo_key" >> "$result_file"
    fi

    # Update previous data variables
    previous_owner_account_auths="$current_owner_account_auths"
    previous_active_account_auths="$current_active_account_auths"
    previous_posting_account_auths="$current_posting_account_auths"
    previous_owner_key_auths="$current_owner_key_auths"
    previous_active_key_auths="$current_active_key_auths"
    previous_posting_key_auths="$current_posting_key_auths"
    previous_memo_key="$current_memo_key"
}

g_is_first_run=1
# Function to start hived and monitor its stderr
run_hived_and_monitor() {
    LAST_BLOCK=$1
    LOG_FILE="/tmp/hived_stderr_${LAST_BLOCK}.log"
    FORCE_REPLAY_OPTION=""

    # Apply --force-replay only on the first iteration
    if [ "$g_is_first_run" -eq 1 ]; then
        FORCE_REPLAY_OPTION="--force-replay"
        g_is_first_run=0

    fi

    # Start hived with the conditional --force-replay option


    $BUILD_DIR/hive/programs/hived/hived \
        --webserver-ws-endpoint=0.0.0.0:8091 \
        --webserver-http-endpoint=0.0.0.0:8090 \
        --data-dir=$DATA_DIR \
        --plugin=condenser_api \
        --plugin=block_api \
        $FORCE_REPLAY_OPTION \
        --replay \
        --stop-replay-at-block=$LAST_BLOCK \
        --shared-file-dir=$DATA_DIR/blockchain \
    2> >(tee "$LOG_FILE") &
    # 2> "$LOG_FILE" &

    PID=$!
    echo "Started hived with PID: $PID"

    # Monitor the stderr log of hived
    while true; do
        if grep -q "P2P plugin startup..." "$LOG_FILE"; then

            echo "Running hived (PID: $PID) (block_num: $LAST_BLOCK)"
            curl -s --data '{"jsonrpc":"2.0", "method":"condenser_api.get_account_count", "params":[], "id":1}' localhost:8090 | jq .
            fetch_and_monitor_gtg $LAST_BLOCK
            echo "Stopping hived (PID: $PID)"
            kill -SIGINT $PID
            break
        fi
        sleep 1
    done


    # psql -d haf_block_log -c "SELECT mmm.main_test('mmm',1, $LAST_BLOCK,10000);" 

    # psql -d haf_block_log -c "\pset pager off"
    # psql -d haf_block_log -c "table hive.contexts"
    # psql -d haf_block_log -c "table hive.mmm_accountauth_a"
    # psql -d haf_block_log -c "table hive.mmm_keyauth_a"
    # psql -d haf_block_log -c "table hive.mmm_keyauth_k"


    # Optionally, remove the log file after stopping hived
    rm "$LOG_FILE"
}

apply_keyauth()
{
SQL_COMMANDS="
CREATE SCHEMA IF NOT EXISTS mmm;
SELECT hive.app_create_context('mmm');
SELECT hive.app_state_provider_import('KEYAUTH', 'mmm');
SELECT hive.app_context_detach('mmm');

CREATE OR REPLACE FUNCTION mmm.main_test(
    IN _appContext VARCHAR,
    IN _from INT,
    IN _to INT,
    IN _step INT
)
RETURNS void
LANGUAGE 'plpgsql'

AS
\$\$
DECLARE
_last_block INT ;
BEGIN

  FOR b IN _from .. _to BY _step LOOP
    _last_block := b + _step - 1;

    IF _last_block > _to THEN --- in case the _step is larger than range length
      _last_block := _to;
    END IF;

    RAISE NOTICE 'Attempting to process a block range: <%s, %s>', b, _last_block;

    PERFORM hive.app_state_providers_update(b, _last_block, _appContext);

    RAISE NOTICE 'Block range: <%s, %s> processed successfully.', b, _last_block;

  END LOOP;

  RAISE NOTICE 'Leaving massive processing of block range: <%s, %s>...', _from, _to;
END
\$\$;
"
    psql -d haf_block_log -c "$SQL_COMMANDS"

}

drop_keyauth()
{
SQL_COMMANDS="
SELECT hive.app_state_provider_drop('KEYAUTH', 'mmm');
SELECT hive.app_remove_context('mmm');
"
    psql -d haf_block_log -c "$SQL_COMMANDS"

}

# apply_keyauth

# Loop over the array of noncontiguous numbers
for LAST_BLOCK in "${NUMBERS[@]}"
do
    echo "Running with LAST_BLOCK set to $LAST_BLOCK"
    run_hived_and_monitor $LAST_BLOCK
done

# drop_keyauth